<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WIENER DOGE üê∂</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root{--purple:#8a2be2;--gold:#ffd700;--pup:#8b4513;--bg:#0a0a0a;}
    body{margin:0;background:linear-gradient(135deg,#1a0033,#000);color:#fff;font-family:'Comic Sans MS',sans-serif;text-align:center;overflow:hidden;position:relative;}
    .stars{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;}
    .star{position:absolute;background:#fff;border-radius:50%;animation:twinkle 3s infinite;}
    @keyframes twinkle{0%,100%{opacity:0.4;transform:scale(1);}50%{opacity:1;transform:scale(1.3);}}
    h1{font-size:28px;margin:10px 0;text-shadow:0 0 20px var(--purple);letter-spacing:2px;}
    .stats{display:flex;justify-content:space-around;font-size:20px;margin:10px 0;}
    .stat{background:rgba(255,255,255,0.1);padding:8px 12px;border-radius:15px;}
    #wiener{width:200px;height:200px;margin:20px auto;cursor:pointer;position:relative;}
    #wiener img{width:100%;height:100%;object-fit:contain;filter:drop-shadow(0 0 25px var(--purple));transition:0.2s;}
    #wiener:active img{transform:scale(0.95);}
    .actions{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin:15px;}
    .btn{background:linear-gradient(45deg,var(--purple),#9b59b6);color:#fff;border:none;padding:12px 20px;border-radius:20px;font-size:16px;font-weight:bold;cursor:pointer;box-shadow:0 5px 15px rgba(138,43,226,0.4);}
    .btn:disabled{opacity:0.5;cursor:not-allowed;}
    .shop{background:rgba(255,255,255,0.05);backdrop-filter:blur(15px);margin:15px;padding:15px;border-radius:25px;border:1px solid rgba(138,43,226,0.3);}
    .item{display:flex;justify-content:space-between;align-items:center;margin:10px 0;padding:10px;background:rgba(255,255,255,0.1);border-radius:15px;}
    #leaderboard{position:fixed;top:0;right:-300px;width:280px;height:100%;background:rgba(0,0,0,0.9);padding:20px;overflow-y:auto;transition:0.3s;}
    #leaderboard.open{right:0;}
    #lbList{list-style:none;padding:0;}
    #lbList li{padding:10px;margin:5px 0;background:rgba(138,43,226,0.2);border-radius:10px;font-size:14px;}
    #particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10;}
    .particle{font-size:30px;animation:float 1.5s ease-out forwards;}
    @keyframes float{to{transform:translateY(-100vh) rotate(360deg);opacity:0;}}
    .daily{background:linear-gradient(45deg,#ff6b6b,#ffd93d);color:#000;padding:15px;border-radius:20px;margin:15px;font-weight:bold;box-shadow:0 0 25px rgba(255,107,107,0.6);}
  </style>
</head>
<body>
  <div class="stars" id="stars"></div>
  <h1>üê∂ WIENER DOGE üê∂</h1>
  <div class="stats">
    <div class="stat" id="points">Points: 0</div>
    <div class="stat" id="level">Lvl 1</div>
    <div class="stat" id="happy">Happy: 100%</div>
  </div>
  <div id="wiener" onclick="petWiener()">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...[TRUNCATED - USE YOUR UPLOADED IMAGE URL INSTEAD]" alt="Wiener Doge" id="wienerImg">
  </div>
  <div id="particles"></div>

  <div class="daily" id="dailyBtn">Daily Check-in: Claim 500 Points! üêï</div>

  <div class="actions">
    <button class="btn" onclick="feedWiener()">üçñ Feed (+10 pts)</button>
    <button class="btn" onclick="playWiener()">üéæ Play (+20 pts)</button>
    <button class="btn" onclick="toggleLeaderboard()">üèÜ Top 50</button>
    <button class="btn" onclick="share()">üì§ Share Wiener</button>
  </div>

  <div class="shop">
    <h3>üõí Wiener Shop</h3>
    <div class="item">
      <span>Auto-Feeder <span id="autoCount">0</span></span>
      <button class="btn" id="buyAuto" onclick="buyAuto()">Cost: <span id="autoCost">50</span></button>
    </div>
    <div class="item">
      <span>Golden Bone <span id="goldCount">0</span></span>
      <button class="btn" id="buyGold" onclick="buyGold()">Cost: <span id="goldCost">200</span></button>
    </div>
  </div>

  <div id="leaderboard">
    <button class="btn" onclick="toggleLeaderboard()" style="float:right;">‚úï</button>
    <h3>üèÜ TOP 50 WIENER DOGES</h3>
    <ul id="lbList"></ul>
    <p>Your Rank: <span id="yourRank">--</span></p>
  </div>

  <script>
    const tg = Telegram.WebApp;
    tg.ready(); tg.expand();
    const userId = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : 'anon_' + Math.random().toString(36).substr(2, 9);

    let game = {
      points: 0, totalPoints: 0, level: 1, happy: 100,
      autoFeeders: 0, goldenBones: 0, autoCost: 50, goldCost: 200,
      lastDaily: 0, lastUpdate: Date.now()
    };

    // Supabase Leaderboard (FREE TIER)
    const SUPABASE_URL = 'https://your-project.supabase.co'; // ‚Üê CREATE FREE ACCOUNT
    const SUPABASE_KEY = 'your-anon-key'; // ‚Üê GET FROM SUPABASE
    const supabase = { // Simple fetch wrapper
      async upsertScore(score) {
        await fetch(`${SUPABASE_URL}/rest/v1/leaderboard?select=*`, {
          method: 'POST',
          headers: {
            'apikey': SUPABASE_KEY,
            'Authorization': `Bearer ${SUPABASE_KEY}`,
            'Content-Type': 'application/json',
            'Prefer': 'resolution=merge-duplicates'
          },
          body: JSON.stringify({ user_id: userId, username: tg.initDataUnsafe.user?.username || 'Anonymous', score })
        });
      },
      async getTop50() {
        const res = await fetch(`${SUPABASE_URL}/rest/v1/leaderboard?order=score.desc&limit=50`, {
          headers: { 'apikey': SUPABASE_KEY }
        });
        return await res.json();
      }
    };

    // Elements
    const els = {
      points: document.getElementById('points'),
      level: document.getElementById('level'),
      happy: document.getElementById('happy'),
      dailyBtn: document.getElementById('dailyBtn'),
      autoBtn: document.getElementById('buyAuto'),
      goldBtn: document.getElementById('buyGold'),
      autoCost: document.getElementById('autoCost'),
      goldCost: document.getElementById('goldCost'),
      autoCount: document.getElementById('autoCount'),
      goldCount: document.getElementById('goldCount'),
      lbList: document.getElementById('lbList'),
      yourRank: document.getElementById('yourRank')
    };

    // Load
    tg.CloudStorage.getItem('wienerDoge', (err, data) => {
      if (data) game = JSON.parse(data);
      update(); checkDaily(); loadLeaderboard(); createStars();
      supabase.upsertScore(game.totalPoints);
    });

    function petWiener() {
      const mult = 1 + game.goldenBones * 5;
      const earn = Math.floor(Math.random() * 5 + 1) * mult;
      game.points += earn; game.totalPoints += earn;
      game.happy = Math.min(100, game.happy + 2);
      createParticle('‚ù§Ô∏è');
      tg.HapticFeedback.impactOccurred('light');
      update(); save();
    }

    function feedWiener() {
      if (game.happy < 100) {
        game.points += 10; game.happy = Math.min(100, game.happy + 15);
        createParticle('üçñ');
        tg.HapticFeedback.impactOccurred('medium');
      }
      update(); save();
    }

    function playWiener() {
      game.points +=
